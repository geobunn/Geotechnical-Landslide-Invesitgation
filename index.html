<!DOCTYPE html>
<html lang="en">
<head>
    <title>Hooskanaden Slide</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--add required stylesheets-->
    <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css'/>
    <!-- Include all font awesome css for facebook icon -->
    <!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"> -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!--leaflet css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!--add favicon for the web page-->
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">

    <!--Font-->
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="/css/storymap.2.5.css">

    <!--add required libraries-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.js"></script>

    <!--jquery and Popper-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>

    <!--boostrap-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <!--leaflet.ajax for asynchronously adding geojson data-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.4.4/proj4.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4leaflet/1.0.2/proj4leaflet.min.js"></script>

    <!--story map plugin-->
    <script src="/js/storymap.2.5.js"></script>

    <style>
    .iframe-container{
      position: relative;
      overflow:hidden;
      padding-top: 56.25%;
    }
    .iframe-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }
    .blockquote-container{
      position: relative;
      overflow: hidden;
      padding-top: 10%;
    }
    /* .social {
      position:fixed;
      cursor: pointer;
      font-size:24px;
      color:darkgray;
      z-index:1003;
      top: 4%;
      left:5px;
    }
    .social:hover {
      color: darkblue;
      text-decoration: none;
    } */
    </style>
</head>
<body>
<script>
mycrs = new L.Proj.CRS('EPSG:2991',
        '+proj=lcc +lat_1=43 +lat_2=45.5 +lat_0=41.75 +lon_0=-120.5 +x_0=400000 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs',
        {
            resolutions: [8192, 4096, 2048, 1024, 512, 256, 128, 64, 32, 16, 7, 4, 2, 1] // example zoom level resolutions
        }
    );

// Set bounds within which the tile maps will be loaded
southWest = L.latLng(42, -124.5),
northEast = L.latLng(46, -116.5),
susc_bounds = L.latLngBounds(southWest, northEast);

southWest = L.latLng(42.212, -124.380),
northEast = L.latLng(42.2265, -124.3602),
hs_bounds = L.latLngBounds(southWest, northEast);

</script>


<div id="storymap" class="container-fluid">

    <div class="row">
        <div class="col-sm-6 col-md-8 storymap-map"></div>
        <div class="col-sm-6 col-md-4 storymap-story">
            <section data-scene="scene1">
                <h2>Landslides in Oregon</h2>
                <div>
                  <a href="https://twitter.com/intent/tweet?button_hashtag=HooskanadenSlide&ref_src=twsrc%5Etfw" class="twitter-hashtag-button" data-show-count="false">Tweet #HooskanadanSlide</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                </div>
                <div class="iframe-container">
                  <iframe width="560" height="315" src="https://www.youtube.com/embed/uPFpJTCxwtM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                Bafdfs
            </section>
            <section data-scene="scene2">
                <h2>The Hooskanaden Slide</h2>
            </section>
            <section data-scene="scene3">
                <h2>Surveys for Oregon Department of Transportation</h2>
            </section>
            <section data-scene="scene4">
                <h2>The February 2019 Landslide</h2>
              <div class="iframe-container">
                <iframe width="560" height="315" src="https://www.youtube.com/embed/edkt7-dxELY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
              </div>
            </section>
            <section data-scene="scene5">
                <h2>Impact on Surrounding Areas</h2>
                <div class = "blockquote-container">
                  <blockquote class="twitter-tweet"><p lang="en" dir="ltr">US 101 remains closed at MP 344, 12 mi north of <a href="https://twitter.com/hashtag/Brookings?src=hash&amp;ref_src=twsrc%5Etfw">#Brookings</a>. This is a chronic trouble spot on US 101, which shifted abruptly yesterday. Nearby Carpenterville Hwy is open to traffic, but is a narrow, winding road. It&#39;s not a viable detour route for any trucks. <a href="https://twitter.com/hashtag/HooskanadanSlide?src=hash&amp;ref_src=twsrc%5Etfw">#HooskanadanSlide</a> <a href="https://t.co/NOZZY26OlZ">pic.twitter.com/NOZZY26OlZ</a></p>&mdash; Oregon DOT (@OregonDOT) <a href="https://twitter.com/OregonDOT/status/1100498016719593473?ref_src=twsrc%5Etfw">February 26, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                </div>
            </section>
        </div>

    </div>
</div>
<script type="text/javascript">
    var layers = {
        imagery_base: {
            layer: L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}'),
        },
        saa: {
            layer: L.geoJson.ajax('assets/saa.geojson', {
                color: 'orange',
                pointToLayer: function (feature, latlng) {
                  return L.marker(latlng, {icon: L.divIcon({className: 'fa fa-circle fa-2x'})})
                }
            }),
            legend: '<i class="fa fa-circle fa-1x"></i><p><b>SAAF Location</b></p>'
        },
        absolute_base: {
            layer: L.tileLayer('http://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png')
        },
        street_base: {
            layer: L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
              maxZoom: 19,
	            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            })
        },
        large_extent: {
            layer: L.geoJson.ajax('assets/outside.geojson', {
                color: 'black',
                dashArray: '7',
                fillOpacity: 0,
                weight: 2
            }),
        },
        small_extent: {
            layer: L.geoJson.ajax('assets/inside.geojson', {
                color: 'black',
                dashArray: '7',
                fillOpacity: 0,
                weight: 2
            }),
            legend: '<i style="background: black; opacity: 0.5"></i><p><b>Possible Extents of February 2019 Landslide</b></p>'
        },
        full_extent: {
            layer: L.geoJson.ajax('assets/full.geojson', {
                color: 'red'
            }),
            legend: '<i style="background: red; opacity: 0.5"></i><p><b>Historic Extent of Hooskanaden Slide</b></p>'
        },
        scarps: {
            layer: L.geoJson.ajax('assets/scarps.geojson', {
                color: 'red',
                weight: 2
            }),
            legend: '<i style="background: red; opacity: 0.5"></i><p><b>Scarps</b></p>'
        },
        tls: {
            layer: L.geoJson.ajax('assets/coverage.geojson', {
                color: 'blue'
            }),
            legend: '<i style="background: blue; opacity: 0.5"></i><p><b>Extent of Terrestrial Lidar Surveys</b></p>'
        },
        auto_reroute: {
            layer: L.geoJson.ajax('assets/reroute01.geojson', {
                color: 'magenta',
                weight: 5
            }),
            legend: '<i style="background: magenta; opacity: 0.5"></i><p><b>Auto Detour</b></p>'
        },
        truck_reroute: {
            layer: L.geoJson.ajax('assets/reroute02.geojson', {
                color: 'purple',
                weight: 5
            }),
            legend: '<i style="background: purple; opacity: 0.5"></i><p><b>Truck Detour</b></p>'
        },
        closure: {
            layer: L.geoJson.ajax('assets/closure.geojson', {
                color: 'orange',
                pointToLayer: function (feature, latlng) {
                  return L.marker(latlng, {icon: L.divIcon({className: 'fa fa-window-close fa-1x'})})
                }
            }),
            legend: '<i class="fa fa-window-close fa-1x"></i><p><b>Road Closure</b></p>'
        },
        terrain_base: {
            layer: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}', {
              attribution: 'Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS',
              maxZoom: 13
            })
        },
        susc: {
            layer: L.tileLayer('http://web.engr.oregonstate.edu/~bunnmi/assets/susc/tiles/{z}/{x}/{y}.png', {
              crs: mycrs,
              maxZoom: 7,
              minZoom: 7,
              tms: true,
              bounds: susc_bounds,
              attribution: 'Generated by QTiles |Data from DOGAMI'
            })
        },
        hs: {
            layer: L.tileLayer('/assets/hs/tiles/{z}/{x}/{y}.png', {
              maxZoom: 17,
              minZoom: 17,
              tms: true,
              bounds: hs_bounds,
              attribution: 'Generated by QTiles | Data from Oregon Lidar Consortium'
            })
        }

    };
    var scenes = {
        scene1: {lat: 44.1234985, lng: -122.8264198, zoom: 7, layers: [layers.terrain_base,layers.susc], name: "scene 1"},
        scene2: {lat: 42.2184522, lng: -124.3775941, zoom: 15, layers: [layers.imagery_base, layers.full_extent], name: "scene 2"},
        scene3: {lat: 42.2184522, lng: -124.3775941, zoom: 16, layers: [layers.imagery_base, layers.tls, layers.saa], name: "scene 3"},
        scene4: {lat: 42.2184522, lng: -124.3775941, zoom: 16, layers: [layers.imagery_base,layers.large_extent, layers.hs, layers.small_extent, layers.scarps], name: "scene 4"},
        scene5: {lat: 42.4614849, lng: -124.4283965, zoom: 9, layers: [layers.street_base, layers.auto_reroute, layers.truck_reroute, layers.closure], name: "scene 5"}
    };
    $('#storymap').storymap({
        scenes: scenes,
        baselayer: layers.absolute_base,
        legend: true,
        loader: true,
        flyto: true,
        credits:  "Build with <i class='material-icons' style='color: red; font-size: 10px;'>landscape</i> from Bo Zhao",
        scalebar: true,
        scrolldown: false,
        progressline: true,
        navwidget: true,
        createMap: function () {
            var map = L.map($(".storymap-map")[0], {zoomControl: false}).setView([44, -120], 7);
            basemap = this.baselayer.layer.addTo(map);
            return map;
        }
    });
</script>
</body>
</html>
