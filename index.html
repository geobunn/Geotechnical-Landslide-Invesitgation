<!DOCTYPE html>
<html lang="en">
<head>
    <title>Hooskanaden Slide</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--add required stylesheets-->
    <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css'/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <!--leaflet css-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

    <!--add favicon for the web page-->
    <link rel="shortcut icon" href="/img/favicon.ico" type="image/x-icon">

    <!--Font-->
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">

    <link rel="stylesheet" type="text/css" href="https://geobunn.github.io/Geotechnical-Landslide-Invesitgation/css/storymap.2.5.css">

    <!--add required libraries-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.4.0/leaflet.js"></script>

    <!--jquery and Popper-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>

    <!--boostrap-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <!--leaflet.ajax for asynchronously adding geojson data-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.4.4/proj4.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4leaflet/1.0.2/proj4leaflet.min.js"></script>

    <!--story map plugin-->
    <script src="https://geobunn.github.io/Geotechnical-Landslide-Invesitgation/js/storymap.2.5.js"></script>
    <!-- <script src="js/layer_spec.js"></script> -->

    <style>
    .iframe-container{
      position: relative;
      overflow:hidden;
      padding-top: 56.25%;
    }
    .iframe-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }
    .blockquote-container{
      position: relative;
      overflow: hidden;
      padding-top: 0%;
    }
    .end-background-img {
      background-size: cover;
    }
    .responsive {
      width: 100%;
      height: auto;
    }
    .potree-container {
      min-width: 700,
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: auto;
      border: 0;
    }
    img {
      width = 100%;
      height: auto;
      display: block;
    }
    </style>
</head>
<body>

  <nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark storymap-navbar">
      <a class="navbar-brand" href="#">
          <!--convert the style value to a class and then add the class to the css file.-->
          <!--<img src="/img/favicon.ico" class="d-inline-block align-top">-->
          The Hooskanaden Landslide
      </a>
      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse">
          <!--Create class ml-auto for the navbar items you want on the right.-->
          <ul class="navbar-nav ml-auto"></ul>
      </div>
      <a>
        <div>
          <a href="https://twitter.com/intent/tweet?button_hashtag=HooskanadenSlide&ref_src=twsrc%5Etfw" class="twitter-hashtag-button" data-show-count="false">Tweet #HooskanadanSlide</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
        </div>
      </a>
  </nav>

<script>
mycrs = new L.Proj.CRS('EPSG:2991',
        '+proj=lcc +lat_1=43 +lat_2=45.5 +lat_0=41.75 +lon_0=-120.5 +x_0=400000 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs',
        {
            resolutions: [8192, 4096, 2048, 1024, 512, 256, 128, 64, 32, 16, 7, 4, 2, 1] // example zoom level resolutions
        }
    );

// Set bounds within which the tile maps will be loaded
southWest = L.latLng(42, -124.5),
northEast = L.latLng(46, -116.5),
susc_bounds = L.latLngBounds(southWest, northEast);

southWest = L.latLng(42.212, -124.380),
northEast = L.latLng(42.2265, -124.3602),
hs_bounds = L.latLngBounds(southWest, northEast);
//
</script>

<div id="storymap" class="container-fluid">

    <div class="row">
        <div class="col-sm-6 col-md-8 storymap-map"></div>
        <div class="col-sm-6 col-md-4 storymap-story">
            <section data-scene="scene0" data-background="https://geobunn.github.io/Geotechnical-Landslide-Invesitgation/img/LR_Scan.jpg">
                <div class="fullscreen text-center">

                    <h1 class="display-4 d-flex justify-content-center">The Hooskanaden Landslide</h1>
                    <h3 style="color: white">One of Oregon's Most Active Slides</h3>
                </div>
            </section>
            <section data-scene="scene1">
                <h2>Landslides in Oregon</h2>

                  <p>The geology and climate of western Oregon are responsible for creating significant landslide hazards, particularly in the Oregon Coast Range.
                     This risk can be explained in large part by the correspondence of high susceptibility (e.g., weak, weathered soils or rock) and high precipitation (e.g., quantity, rate, duration).
                     The Oregon Department of Geology and Mineral Industries (<a href = "https://www.oregongeology.org/pubs/ofr/p-O-16-02.htm">Burns et al. 2016</a>) recently published a new, statewide landslide susceptibility map (On right - red means greater susceptibility).
                      When these high to very high susceptibility conditions throughout the Coast Range and Cascades are exposed with substantial volumes of rainfall, the risk of landslides becomes large and results in the frequent occurrence of damaging slides.
                      Landslides often impact highway infrastructure and result in closures for removal of debris and or repair.</p>

                <div class="iframe-container">
                  <iframe width="560" height="315" src="https://www.youtube.com/embed/uPFpJTCxwtM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
            </section>
            <section data-scene="scene2">
                <h2>The Hooskanaden Slide</h2>
                <p> The Hooskanaden Slide is a large, complex landslide located on the southern Oregon Coast.
                  The slide has likely been active for thousands of years, but it has only been well known since the construction of U.S. Route 101 around 1960.
                  Since the highway's construction, the landslide has moved consistently during the winter months, forcing the Oregon Department of Transporation to repave the overlying highways each year- The fresh pavement is visible on the imagery to the right.</p>

                <img src="img/road_top.JPG" class="responsive" alt="responsive image" alt-text="Overview of Hooskanaden Slide" width="600" height="400">
                <b>View of the Hooskanaden Slide from the slopes to its immediate north.</b>
            </section>
            <section data-scene="scene3">
                <h2>Surveys for Oregon Department of Transportation</h2>
                <p>Starting in 2016, the Oregon Department of Transportation, working with researchers at Oregon State University, began <a href="https://www.oregon.gov/ODOT/Programs/ResearchDocuments/SPR807WP.pdf">SPR 807</a> to monitor several active landslides on U.S. Route 101 along the Oregon Coast.
				<br><br>As one of the included landslides, Hooskanaden has been the subject of terrestrial lidar surveys each spring and fall. For each survey, crews document the landslides at three major locations: the highway, the coastal bluff, and a nearby stream culvert.
				<br><br>Movements have been so severe at Hooskanaden that work for SPR 807 spurred an additional research project, <a href="https://www.oregon.gov/ODOT/Programs/ResearchDocuments/SPR808WP.pdf">SPR 808</a> that supported subsurface monitoring of the landslide. Monitoring was performed using a state-of-the art <a href="http://measurandgeotechnical.com/?/products/saaf">SAAF</a> inclinometer system that could record subsurface movements at a high frequency and transmit data wirelessly from the site. This monitoring was short-lived, though, as the SAAF was destroyed by extreme landslide displacements following only three months of service.</p>

            </section>
            <section data-scene="scene4">
                <h2>The February 2019 Landslide</h2>
                <p>On February 25, 2019, following heavy precipitation over preceding days, the Hooskanaden Slide began to move rapidly.
                  Movements have continued to date, making a highway repair very difficult. The video below shows the extent of damage nearly one week after the slide reactivated.

              <div class="iframe-container">
                <iframe width="560" height="315" src="https://www.youtube.com/embed/edkt7-dxELY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
              </div>
            </section>
            <section data-scene="scene5">
                <h2>Impact on Surrounding Areas</h2>
                Highway closures have severely impacted the surrounding region. Traffic has needed to be detoured around the slide.
                The normally 35-minute drive between the closely-tied communities of Brookings and Gold Beach now takes 1-hour in a standard automobile, and even worse 6-hours for semi-trucks.
                These delays have affected the supply of items ranging from gasoline to groceries in either community.</p>
                <div class = "blockquote-container">
                  <blockquote class="twitter-tweet"><p lang="en" dir="ltr">US 101 remains closed at MP 344, 12 mi north of <a href="https://twitter.com/hashtag/Brookings?src=hash&amp;ref_src=twsrc%5Etfw">#Brookings</a>. This is a chronic trouble spot on US 101, which shifted abruptly yesterday. Nearby Carpenterville Hwy is open to traffic, but is a narrow, winding road. It&#39;s not a viable detour route for any trucks. <a href="https://twitter.com/hashtag/HooskanadanSlide?src=hash&amp;ref_src=twsrc%5Etfw">#HooskanadanSlide</a> <a href="https://t.co/NOZZY26OlZ">pic.twitter.com/NOZZY26OlZ</a></p>&mdash; Oregon DOT (@OregonDOT) <a href="https://twitter.com/OregonDOT/status/1100498016719593473?ref_src=twsrc%5Etfw">February 26, 2019</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
                </div>
                <p> It is expected that construction crews will have the highway reopened by mid-March, but even then it will be a single-lane gravel road with significant delays during commute hours.</p>
            </section>
            <section data-scene="scene6" data-background="img/repair.mp4">
                <div class="fullscreen text-center">

                    <h1 class="display-4 d-flex justify-content-center">The Hooskanaden Landslide</h1>
                    <h3 style="color: white">Storymap by Michael Bunn</h3>
                    <h4 style="color: white"><small><a style="color: white" href="https://github.com/geobunn">"geobunn" on GitHub</a></small></h4>
                    <h4><small style="color: white">Template By: Bo Zhao<br><a style="color: white" href="https://github.com/jakobzhao">https://github.com/jakobzhao</a></small></h4>
                </div>
            </section>

        </div>

    </div>
</div>
<script type="text/javascript">

var mybounds = [[42.11, -124.27],[42.31, -124.47]];
////////////////////////////////////////////////////////////////////////////////
// ODOT SURVEYS (SCENE 3)
var saa = L.geoJson.ajax('assets/saa.geojson', {
        color: 'orange',
        pointToLayer: function (feature, latlng) {
        return L.marker(latlng, {icon: L.divIcon({className: 'fa fa-circle fa-2x'})})
        },
        onEachFeature: function (feature, layer) {
          layer.bindPopup('<img src="img/SAA.jpg" class="responsive" alt="responsive image" alt-text="Overview of Hooskanaden Slide" width="600" height="400"><b>Picture of the SAAF installation, including the SAAF (left) and the data logging equipment (right)</b>',{
            minWidth: 400,
          });
        },
    });
var saa_legend = '<i class="fa fa-circle fa-1x"></i><p><b>SAAF Location</b></p>';

var img01 = '<img src="img/road.jpg" class="responsive" alt="responsive image" alt-text="View of road at Hooskanaden" width="600" height="400"><b>View of landslide-disturbances along U.S. Route 101.</b>';
var img02 = '<img src="img/beach.JPG" class="responsive" alt="responsive image" alt-text="Overview of Hooskanaden Slide" width="600" height="400"><b>Laser scanner operating on the beach below the Hooskanaden Slide.</b>';
var img03 = '<img src="img/culvert.JPG" class="responsive" alt="responsive image" alt-text="Overview of Hooskanaden Slide" width="600" height="400"><b>View of damaged culverts in the Hooskanaden Creek embankment.</b>';
var tls = L.geoJson.ajax('assets/coverage2.geojson', {
        color: 'blue',
        onEachFeature: function (feature, layer) {
          if (feature.properties.TRIG == 1) {
            layer.bindPopup(img01, {minWidth: 400});
          } else if (feature.properties.TRIG == 2) {
            layer.bindPopup(img02, {minWidth: 400});
          } else {
            layer.bindPopup(img03, {minWidth: 400});
          }
        },
    });
var tls_legend = '<i style="background: blue; opacity: 0.5"></i><p><b>Extent of Terrestrial Lidar Surveys</b></p>';

////////////////////////////////////////////////////////////////////////////////
// FEB 2019 EVENT (SCENE 4)
var ortho = L.tileLayer('https://research.engr.oregonstate.edu/geomatics/projects/OregonCoast/Hooskanaden/Feb2019/uas/ortho/0303top/{z}/{x}/{y}.png',{
    minZoom: 10,
    maxNativeZoom: 23,
    maxZoom: 25,
    noWrap: true,
    bounds: mybounds,
    attribution: '<div id="credits" style="display:inline">UAS Imagery acquired by Oregon State University in collaboration with ODOT | Basemap &copy; ArcGIS</div>'
});

var hs = L.tileLayer('https://research.engr.oregonstate.edu/geomatics/projects/OregonCoast/Hooskanaden/Feb2019/uas/ortho/0303topdsm/{z}/{x}/{y}.png',{
    minZoom: 10,
    maxNativeZoom: 21,
    maxZoom: 25,
    noWrap: true,
    bounds: hs_bounds,
    attribution: '<div id="credits" style="display:inline">UAS Imagery acquired by Oregon State University in collaboration with ODOT | Basemap &copy; ArcGIS</div>',
});

var lidar = L.marker([42.219290, -124.371018],{
        color: 'orange',
        icon: L.divIcon({className: 'fa fa-beer fa-5x'}),
        zIndex: 100,
    });
lidar.bindPopup('<div class="potree-container"><iframe width="1000" height="563" src="http://research.engr.oregonstate.edu/geomatics/projects/OregonCoast/Hooskanaden/Feb2019/lidar/" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>',{
  minWidth: 700,
  maxWidth: "auto",
});
var lidar_legend = '<i class="fa fa-circle fa-1x"></i><p><b>Open Lidar</b></p>';

///////////////////////////////////////////////////////////////////////////////
// IMPACT TO SURROUNDINGS (SCENE 5)
var auto_reroute = L.geoJson.ajax('assets/reroute01.geojson', {
        color: 'magenta',
        weight: 5,
        onEachFeature: function (feature, layer) {
          layer.bindPopup("<b>Auto Detour</b><br>Additional 6.1 miles (20 minutes)");
        }
});

var auto_reroute_legend = '<i style="background: magenta; opacity: 0.5"></i><p><b>Auto Detour</b></p>';

var truck_reroute = L.geoJson.ajax('assets/reroute02.geojson', {
    color: 'purple',
    weight: 5,
    onEachFeature: function (feature, layer) {
      layer.bindPopup("<b>Truck Detour</b><br>Additional 104 miles (2 hours, 8 minutes)");
    }
});

var closure = L.geoJson.ajax('assets/closure.geojson', {
    color: 'orange',
    pointToLayer: function (feature, latlng) {
      return L.marker(latlng, {icon: L.divIcon({className: 'fa fa-window-close fa-1x'})})
    },
    onEachFeature: function (feature, layer) {
      layer.bindPopup("<b>Road Closure</b>");
    }
});
var closure_legend = '<i class="fa fa-window-close fa-1x"></i><p><b>Road Closure</b></p>';

///////////////////////////////////////////////////////////////////////////////
// Repairs (SCENE 6)
var truck_reroute_legend = '<i style="background: purple; opacity: 0.5"></i><p><b>Truck Detour</b></p>';


    var layers = {
        imagery_base: {
            layer: L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}'),
        },
        saa: {layer: saa, legend: saa_legend},
        tls: {layer: tls, legend: tls_legend},
        absolute_base: {
            layer: L.tileLayer('http://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png')
        },
        street_base: {
            layer: L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
              maxZoom: 19,
	            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            })
        },
        full_extent: {
            layer: L.geoJson.ajax('assets/full.geojson', {
                color: 'red'
            }),
            legend: '<i style="background: red; opacity: 0.5"></i><p><b>Historic Extent of Hooskanaden Slide</b></p>'
        },

        auto_reroute: {layer: auto_reroute, legend: auto_reroute_legend},
        truck_reroute: {layer: truck_reroute, legend: truck_reroute_legend},
        closure: {layer: closure, legend: closure_legend},

        terrain_base: {
            layer: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}', {
              attribution: 'Tiles &copy; Esri &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS',
              maxZoom: 13
            })
        },
        susc: {
            // layer: L.tileLayer('http://web.engr.oregonstate.edu/~bunnmi/assets/susc/tiles/{z}/{x}/{y}.png', {
            layer: L.tileLayer('assets/susc/tiles/{z}/{x}/{y}.png', {
              crs: mycrs,
              maxZoom: 7,
              minZoom: 7,
              tms: true,
              bounds: susc_bounds,
              attribution: 'Generated by QTiles |Data from DOGAMI'
            }),
            legend: '<ul style="list-style-type:none;"><li><strong>Landslide Susceptibility</strong></li><li><i style="background: #E19191; opacity: 0.5"></i><p><b>Low</b></p></li><li><i style="background: #D05353; opacity: 0.5"></i><p><b>Moderate</b></p></li><li><i style="background: #983D3D; opacity: 0.5"></i><p><b>High</b></p></li><li><i style="background: #5F2626; opacity: 0.5"></i><p><b>Very High</b></p></li></ul>'
        },
        hs: {layer:hs},
        ortho: {layer:ortho},
        lidar: {layer:lidar,legend:lidar_legend},


    };



    var scenes = {
        scene0: {lat: 42.4614849, lng: -124.4283965, zoom: 9, position: 'fullpage', name: 'Opening'},
        scene1: {lat: 44.1234985, lng: -122.8264198, zoom: 7, layers: [layers.terrain_base,layers.susc], name: "Landslides in Oregon"},
        scene2: {lat: 42.2184522, lng: -124.3775941, zoom: 15, layers: [layers.imagery_base, layers.full_extent], name: "The Hooskanaden Slide"},
        scene3: {lat: 42.2184522, lng: -124.3775941, zoom: 16, layers: [layers.imagery_base, layers.tls, layers.saa], name: "ODOT surveys"},
        scene4: {lat: 42.220434, lng:   -124.372629, zoom: 18, layers: [layers.imagery_base,layers.ortho,layers.lidar], name: "Feb 2019 Event"},
        scene5: {lat: 42.4614849, lng: -124.4283965, zoom: 9, layers: [layers.street_base, layers.auto_reroute, layers.truck_reroute, layers.closure], name: "Impact to Surroundings"},
        scene6: {lat: 42.4614849, lng: -124.4283965, zoom: 9, position: 'fullpage', name: 'Repairs'}
    };

    $('#storymap').storymap({
        scenes: scenes,

        baselayer: layers.absolute_base,
        legend: true,
        navbar: true,
        loader: true,
        flyto: true,
        credits:  "G~E~O~B~U~N~N",
        scalebar: true,
        scrolldown: false,
        progressline: true,
        navwidget: true,
        createMap: function () {
            var map = L.map($(".storymap-map")[0], {zoomControl: false}).setView([44, -120], 7);
            basemap = this.baselayer.layer.addTo(map);
            return map;
        }
    });
</script>

</body>
</html>
